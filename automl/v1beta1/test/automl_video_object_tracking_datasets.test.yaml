# Copyright 2019 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# DO NOT EDIT! This is a generated sample configuration.

---
type: SampleTestProto
schema_version: 1.2.0
test:
  suites:
  - name: AutoML Video Object Tracking – Dataset Management
    setup:
    - env:
        name: GOOGLE_PROJECT_ID
        variable: project_id
    - code: dataset_display_name = "a" + uuid().replace("-", "")[:30]
    - log:
      - 'Dataset display_name for test: {}'
      - dataset_display_name
    teardown:
    - log:
      - Cleaning up dataset (if was created + not deleted in test case)
    - call_may_fail:
        params:
          project:
            variable: project_id
          dataset_id:
            variable: generated_dataset_id
        sample: automl_video_object_tracking_delete_dataset
    cases:
    - name: Import Data
      spec:
      - call:
          params:
            project:
              variable: project_id
            display_name:
              variable: dataset_display_name
          sample: automl_video_object_tracking_create_dataset
      - extract_match:
          pattern: datasets/([^\s]+)
          variable: generated_dataset_id
      - log:
        - 'Generated Dataset ID: {}'
        - generated_dataset_id
      - call:
          params:
            project:
              variable: project_id
            dataset_id:
              variable: generated_dataset_id
          sample: automl_video_object_tracking_get_dataset
      - assert_contains:
        - literal: 'Example count: 0'
      - call:
          params:
            project:
              variable: project_id
            dataset_id:
              variable: generated_dataset_id
          sample: automl_video_object_tracking_import_data
      - assert_contains:
        - literal: Imported training data
      - call:
          params:
            project:
              variable: project_id
            dataset_id:
              variable: generated_dataset_id
          sample: automl_video_object_tracking_get_dataset
      - assert_contains:
        - literal: 'Example count:'
